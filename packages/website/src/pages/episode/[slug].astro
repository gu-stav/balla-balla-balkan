---
import Layout from '../../layouts/Layout.astro';
import { getEpisode, getEpisodes } from '../../utils/episodes';
import { PortableText } from "astro-portabletext";
import EpisodeLatest from '../../components/EpisodeLatest.astro';

const { slug } = Astro.params;
const episode = await getEpisode(slug);

export async function getStaticPaths() {
    const episodes = await getEpisodes();

  return episodes.map((episode) => ({
    params: {
      slug: episode.slug
    }
  }));
}
---
<Layout title={episode.title}>
    <article>
        <div class="flex flex-col gap-8 items-center pb-6 w-full">
            <EpisodeLatest episode={episode} />
        </div>

        <div class="flex flex-col gap-4 max-w-5xl px-16 text-xl">
            <PortableText value={episode.richtext} />
        </div>
    </article>
</Layout>
